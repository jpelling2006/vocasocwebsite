<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- bootstrap css -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

        <!-- our css -->
        <link href="../css/styles.css" rel="stylesheet">

        <title> - Cardiff Vocaloid Society</title>
    </head>
    
    <body>
        <!-- navbar -->
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand bold-text" href="#">
                    <img src="../images/Logo_Pride_Expanded.png" alt="Cardiff Vocaloid Society's Logo" width="60" height="60" class="d-inline-block align-text-centre">
                    Cardiff Vocaloid Society
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#vocanav" aria-controls="vocanav"
                aria-expanded="false"
                aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="vocanav">
                    <div class="navbar-nav">
                        <a class="nav-link" href="index.html">Home</a>
                        <a class="nav-link" href="events.html">Events</a>
                        <a class="nav-link" href="https://www.cardiffstudents.com/activities/society/vocaloidsociety/">SU Page</a>
                        <a class="nav-link" href="gallery.html">Gallery</a>
                        <a class="nav-link" href="https://linktr.ee/cardiffvocaloid">Linktree</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container">
        <h1 style="font-size:var(--step-4);">Events</h1>
        </div>
        <br>

        <div class="calendar">
        
        <div class="container" id="eventsList">
            <!-- Events will be displayed here -->
        </div>
        </div>


        <br>

        <h1>h1</h1>
        <h2>h2</h2>
        <h3>h3</h3>
        <h4>h4</h4>
        <h5>h5</h5>
        <h6>h6</h6>
        <p>p</p>
        
        <script>
            // Function to get the ordinal suffix
            function getOrdinalSuffix(day) {
                if (day > 3 && day < 21) return 'th'; // Handle 11th, 12th, 13th, etc.
                switch (day % 10) {
                case 1: return 'st';
                case 2: return 'nd';
                case 3: return 'rd';
                default: return 'th';
                }
            }

            function addHours(date, hours) {
                date.setHours(date.getHours() + hours);
                return date;
            }

            // Fetch the JSON file using fetch API
            fetch('../data/socials.json')
                .then(response => response.json())  // Parse the JSON response
                .then(events => {
                    // Loop through the events and display each one
                    const eventsListContainer = document.getElementById('eventsList');
                    events.forEach(event => {
                        // Convert date to more readable formats
                        const eventDate = new Date(event.date);
                        const eventDayName = eventDate.toLocaleDateString('en-GB', { weekday: 'long' });
                        const eventDayNumber = eventDate.getDate() + getOrdinalSuffix(eventDate.getDate());
                        const eventMonth = eventDate.toLocaleString('en-GB', { month: 'short' });
                        const eventTime = eventDate.toLocaleTimeString('en-GB', { hour12: false, hour: '2-digit', minute: '2-digit' });
                        const eventEndTime = addHours(eventDate, event.length).toLocaleTimeString('en-GB', { hour12: false, hour: '2-digit', minute: '2-digit' });


                        // Create new divs for each event
                        const dateDiv = document.createElement('div');
                        dateDiv.classList.add('date-box', 'col-4');

                        const eventDiv = document.createElement('div');
                        eventDiv.classList.add('event-box', 'col-8');

                        // Add details to the divs
                        dateDiv.innerHTML = `
                            <p>
                                <b style="font-size: var(--space-s-l);">${eventDayName}</b>
                                <br>
                                <b style="font-size: var(--space-s-l);">${eventDayNumber} ${eventMonth}</b>
                                <br>
                                <b style="font-size: var(--space-xs-s);">${eventTime} - ${eventEndTime}</b>
                            </p>
                        `;

                        eventDiv.innerHTML = `
                        <p>
                            <b style="font-size: var(--space-s-l);">${event.title}</b>
                            <p>${event.description}</p>
                            <p><strong>Category:</strong> ${event.category}</p>
                        </p>
                        `;

                        // Create a div for the row
                        const rowDiv = document.createElement('div');
                        rowDiv.classList.add('row-box', 'row', 'row-cols-6');

                        // Append the divs to the row
                        rowDiv.appendChild(dateDiv);
                        rowDiv.appendChild(eventDiv);
                        
                        // Append the row to the events container
                        eventsListContainer.appendChild(rowDiv);
                    });
                })
                .catch(error => console.error('Error loading JSON:', error));
        </script>

        
        

        <!-- scripts required for bootstrap -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    </body>
</html>
